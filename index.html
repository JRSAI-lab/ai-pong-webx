<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ai-Pong WebX ‚Äì Game of the Year üèì</title>
    <style>
        body { margin:0; background:#000; touch-action:manipulation; overflow:hidden; }
        canvas { display:block; width:100vw; height:100vh; image-rendering:pixelated; }
        #touch-left, #touch-right { position:fixed; bottom:0; width:50%; height:40%; opacity:0; z-index:10; }
        #touch-left { left:0; }
        #touch-right { right:0; }
        #info { position:fixed; top:10px; left:0; right:0; text-align:center; color:#0f0; font-family:monospace; pointer-events:none; }
    </style>
</head>
<body>
<div id="info">Tap left side = W/S‚ÄÉ‚ÄÉTap right side = ‚Üë‚Üì‚ÄÉ‚ÄÉPhysical keyboard also works!</div>
<div id="touch-left"></div>
<div id="touch-right"></div>
<canvas id="canvas"></canvas>

<script>
    const canvas = document.getElementById('canvas');
    canvas.width = 800; canvas.height = 600;
    const ctx = canvas.getContext('2d');
    const scoresEl = { textContent: '' };
    document.getElementById('info').insertAdjacentHTML('afterend', '<div id="scores" style="font-size:48px;position:fixed;top:60px;left:50%;transform:translateX(-50%);color:#fff;letter-spacing:20px">0 - 0</div>');
    scoresEl.textContent = document.getElementById('scores').textContent;

    const PADDLE_SPEED = 10, BALL_SPEED_X = 7, BALL_SPEED_Y = 7, WINNING_SCORE = 11;
    let leftPaddle = { y: 260 }, rightPaddle = { y: 260 };
    let ball = { x: 400, y: 300, vx: BALL_SPEED_X, vy: BALL_SPEED_Y };
    let scoreLeft = 0, scoreRight = 0;
    let gameRunning = true;
    let leftUp = false, leftDown = false, rightUp = false, rightDown = false;

    // Touch controls
    document.getElementById('touch-left').addEventListener('touchstart', e => { e.preventDefault(); leftUp = true; leftDown = true; });
    document.getElementById('touch-left').addEventListener('touchend', e => { e.preventDefault(); leftUp = leftDown = false; });
    document.getElementById('touch-right').addEventListener('touchstart', e => { e.preventDefault(); rightUp = true; rightDown = true; });
    document.getElementById('touch-right').addEventListener('touchend', e => { e.preventDefault(); rightUp = rightDown = false; });

    // Physical keyboard (works when you pop the keyboard on phone!)
    window.addEventListener('keydown', e => {
        if (e.key === 'w' || e.key === 'W') leftUp = true;
        if (e.key === 's' || e.key === 'S') leftDown = true;
        if (e.key === 'ArrowUp') rightUp = true;
        if (e.key === 'ArrowDown') rightDown = true;
    });
    window.addEventListener('keyup', e => {
        if (e.key === 'w' || e.key === 'W') leftUp = false;
        if (e.key === 's' || e.key === 'S') leftDown = false;
        if (e.key === 'ArrowUp') rightUp = false;
        if (e.key === 'ArrowDown') rightDown = false;
    });

    function resetBall() {
        ball.x = 400; ball.y = 300;
        ball.vx = (Math.random() > 0.5 ? 1 : -1) * BALL_SPEED_X;
        ball.vy = (Math.random() * 10 - 5);
    }

    function update() {
        if (!gameRunning) return;
        if (leftUp) leftPaddle.y = Math.max(0, leftPaddle.y - PADDLE_SPEED);
        if (leftDown) leftPaddle.y = Math.min(520, leftPaddle.y + PADDLE_SPEED);
        if (rightUp) rightPaddle.y = Math.max(0, rightPaddle.y - PADDLE_SPEED);
        if (rightDown) rightPaddle.y = Math.min(520, rightPaddle.y + PADDLE_SPEED);

        ball.x += ball.vx; ball.y += ball.vy;
        if (ball.y <= 0 || ball.y >= 588) ball.vy = -ball.vy;
        if (ball.x < 35 && ball.y > leftPaddle.y && ball.y < leftPaddle.y + 80) { ball.vx = BALL_SPEED_X; ball.vy += (ball.y - (leftPaddle.y + 40)) / 10; }
        if (ball.x > 753 && ball.y > rightPaddle.y && ball.y < rightPaddle.y + 80) { ball.vx = -BALL_SPEED_X; ball.vy += (ball.y - (rightPaddle.y + 40)) / 10; }
        if (ball.x < 0) { scoreRight++; resetBall(); }
        if (ball.x > 800) { scoreLeft++; resetBall(); }
        if (scoreLeft >= WINNING_SCORE || scoreRight >= WINNING_SCORE) gameRunning = false;

        document.getElementById('scores').textContent = `${scoreLeft} - ${scoreRight}`;
    }

    function render() {
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,800,600);
        ctx.strokeStyle = '#fff';
        for (let i = 0; i < 30; i++) ctx.fillRect(399, i*20+5, 2, 10);
        ctx.fillStyle = '#fff';
        ctx.fillRect(20, leftPaddle.y, 15, 80);
        ctx.fillRect(765, rightPaddle.y, 15, 80);
        ctx.fillRect(ball.x-6, ball.y-6, 12, 12);
    }

    function loop() { update(); render(); if (gameRunning) requestAnimationFrame(loop); }
    resetBall(); loop();
</script>
</body>
</html>
